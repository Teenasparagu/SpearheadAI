<!DOCTYPE html>
<html>
<head>
    <title>Spearhead AI</title>
    <style>
        body {
            display: flex;
            font-family: sans-serif;
        }

        .sidebar {
            width: 220px;
            padding: 20px;
            background-color: #f0f0f0;
        }

        .grid-container {
            flex-grow: 1;
            padding: 20px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat({{ width }}, 12px);
            grid-auto-rows: 12px;
        }

        .cell {
            width: 12px;
            height: 12px;
            border: 1px solid #ccc;
            background-color: white;
        }

        button {
            display: block;
            margin: 10px 0;
            padding: 10px;
            width: 100%;
        }

        .objective {
            background-color: #d3d3d3;
        }

        .zone-1 {
            background-color: rgba(173, 216, 230, 0.5); /* light blue */
        }
        .zone-2 {
            background-color: rgba(255, 182, 193, 0.5); /* light red */
        }

    </style>
</head>
<body>

    <div class="sidebar">
        {% if not player_faction %}
            <h3>Choose Your Faction</h3>
            <form method="POST">
                <input type="hidden" name="action" value="select_faction">
                <button type="submit" name="faction" value="stormcast">Stormcast</button>
                <button type="submit" name="faction" value="skaven">Skaven</button>
            </form>

        {% elif not roll_result %}
            <p>You selected: <strong>{{ player_faction }}</strong></p>
            <form method="POST">
                <input type="hidden" name="action" value="roll_off">
                <button type="submit">Roll for Attacker / Defender</button>
            </form>

        {% elif not selected_realm %}
            <p>{{ roll_result }}</p>
            <h3>Select Realm</h3>
            <form method="POST">
                <input type="hidden" name="action" value="select_realm">
                <button type="submit" name="realm" value="Aqshy">Aqshy</button>
                <button type="submit" name="realm" value="Ghyran">Ghyran</button>
            </form>

        {% if player_faction and roll_result and selected_realm and not deployment_map %}
            <h3>Select Deployment Map</h3>
            <form method="POST">
                <input type="hidden" name="action" value="select_deployment_map">
                <button type="submit" name="map" value="straight">Straight Line</button>
                <button type="submit" name="map" value="diagonal">Diagonal</button>
            </form>
        {% elif deployment_map %}
            <p>Deployment Map: <strong>{{ deployment_map }}</strong></p>
        {% endif %}



        {% else %}
            <p>You selected: <strong>{{ player_faction }}</strong></p>
            <p>{{ roll_result }}</p>
            <p>Realm: <strong>{{ selected_realm }}</strong></p>
        {% endif %}
    </div>


    <div class="grid-container">
        <h2>Spearhead AI Board ({{ width }}Ã—{{ height }})</h2>
        <div class="grid">
            {% for y in range(height-1, -1, -1) %}
                {% for x in range(width) %}
                    {% set cls = "cell" %}
                    {% if (x, y) in highlighted %}
                        {% set cls = cls + " objective" %}
                    {% endif %}
                    {% if (x, y) in team1_zone %}
                        {% set cls = cls + " zone-1" %}
                    {% elif (x, y) in team2_zone %}
                        {% set cls = cls + " zone-2" %}
                    {% endif %}
                    <div class="{{ cls }}"></div>
                {% endfor %}
            {% endfor %}
        </div>
    </div>

</body>
</html>
